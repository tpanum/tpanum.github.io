<!doctype html><html lang=en><head><meta charset=utf-8><title>Thomas Kobber Panum</title><meta name=author content="Thomas Kobber Panum"><meta name=viewport content="width=device-width,initial-scale=1,minimum-scale=.5"><link rel=stylesheet href=/css/style.73a00898f2b01814838879027fd65c1600ed31b665d3f2163d710fb37b89d636.css integrity="sha256-c6AImPKwGBSDiHkCf9ZcFgDtMbZl0/IWPXEPs3uJ1jY="></head><body><div class=headerbck></div><div id=grid><header><a href=https://panum.dk/><picture><source type=image/webp srcset="/img/me_x1.webp 1x, /img/me_x2.webp 2x"><source type=image/png srcset="/img/me_x1.png 1x, /img/me_x2.png 2x"><img src=https://panum.dk/img/me_x1.png alt="Thomas Kobber Panum"></picture><h2>Thomas Kobber Panum</h2></a><nav><ul><li class=active><a href=/blog/>Blog</a></li><li>&#183;</li><li><a href=/press/>Press</a></li><li>&#183;</li><li><a href=/academia/>Academia</a></li><li>&#183;</li><li><a href=/teaching/>Teaching</a></li><li>&#183;</li><li><a href=/contact/>Contact</a></li></ul></nav></header><main class=blog><h1 class=title>Disable Bouncer Playback Spam for Emacs Circe Notifications</h1><span class=date>August 10, 2018 &mdash; Thomas Kobber Panum</span><p>I recently changed to using <a href=https://github.com/jorgenschaefer/circe>circe</a> as my everyday IRC client.
Despite the <a href=https://github.com/eqyiel/circe-notifications>circe-notifications</a> being featureful, the suggested way to reduce notification spam from your irc bouncer is a bit of a hack.
As stated in the readme, simply delay the activation hook by <em>x</em> seconds and pray it is large enough for missing all notifcations during playback.</p><center><figure><img src=/ox-hugo/team_chat.png width=70%></figure></center><p>From my experience it works reasonably well, however, when you work on a laptop (with <code>circe-lagmon-mode</code> for reconnection after suspend) the issue persist as you reconnect to your bouncer in the same emacs session.
I am using ZNC as my bouncer, and it conviently prefixes all messages with a timestamp.
Knowing this, I customized <code>circe-notifications-notify</code> to ignore messages with such a prefix.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(defun circe-notifications-notify (nick body channel)
</span></span><span style=display:flex><span>  (unless (string-match <span style=color:#e6db74>&#34;^\[[0-9]+:[0-9]+\]&#34;</span> body)
</span></span><span style=display:flex><span>      (alert
</span></span><span style=display:flex><span>       body
</span></span><span style=display:flex><span>       <span style=color:#e6db74>:severity</span> circe-notifications-alert-severity
</span></span><span style=display:flex><span>       <span style=color:#e6db74>:title</span> nick
</span></span><span style=display:flex><span>       <span style=color:#e6db74>:style</span> circe-notifications-alert-style)))
</span></span></code></pre></div></main><footer><p>©
<span>2023</span>
<span>Thomas Kobber Panum, theme is heavily inspired by <a href=https://ruben.verborgh.org target=_blank rel=noopener>Ruben Verborgh's website.</a></span><br>Content of this website, text and images, is licensed under <a href=https://creativecommons.org/licenses/by/4.0/ target=_blank title="Creative Commons Attribution 4.0 International License"><abbr class=caps>CC</abbr> <abbr class=caps>BY</abbr> 4.0</a> except where otherwise noted.</p><ul class=profiles><li><a data-icon= href=https://twitter.com/tpanum target=_blank rel=noopener>Twitter</a></li><li><a data-icon= href=https://github.com/tpanum target=_blank rel=noopener>GitHub</a></li><li><a data-icon= href=https://www.linkedin.com/in/tpanum target=_blank rel=noopener>LinkedIn</a></li></ul></footer></div></body></html>